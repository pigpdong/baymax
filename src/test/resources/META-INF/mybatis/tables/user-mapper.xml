<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="example">

	<select id="getById" parameterType="TradeOrder" resultType="TradeOrder">
		select * from trade_order where id=#{id}
	</select>
	
	<select id="listByExample" parameterType="TradeOrder" resultType="TradeOrder">
		select * from trade_order
		<where>
			<if test="id != null">
				<!-- 测试多分区键 -->
				and id=#{id}
			</if>
			<if test="userId != null">
				<!-- 测试主分区键 -->
				and user_id=#{userId}
			</if>
			<if test="productId != null">
				<!-- 测试全表扫描 -->
				and product_id=#{productId}
			</if>
		</where>
	</select>	
	
	<update id="updateById" parameterType="TradeOrder">
		update trade_order set amount=#{amount} 
		<where>
			<if test="id != null">
				id=#{id}
			</if>
		</where>
	</update>
	
	<insert id="insert" parameterType="TradeOrder">
		INSERT INTO
		trade_order (
			id,
			product_id,
			amount,
			real_pay_amount,
			create_time,
			user_id,
			ta_id
		)
		VALUES
		(
			#{id},
			#{productId},
			#{amount},
			#{realPayAmount},
			#{createTime},
			#{userId},
			#{taId}
		)
	</insert>
	
	<delete id="deleteByExample" parameterType="TradeOrder">
		delete from trade_order
		<where>
			<if test="id != null">
				<!-- 测试多分区键 -->
				and id=#{id}
			</if>
			<if test="userId != null">
				<!-- 测试主分区键 -->
				and user_id=#{userId}
			</if>
			<if test="productId != null">
				<!-- 测试全表扫描 -->
				and product_id=#{productId}
			</if>
		</where>
	</delete>

</mapper>